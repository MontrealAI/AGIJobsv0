{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AGI Alpha Node Operator Config",
  "type": "object",
  "required": ["version", "network", "operator", "wallet", "contracts", "staking", "planner", "specialists", "knowledge_lake", "orchestrator", "observability", "compliance", "safety"],
  "properties": {
    "version": {"type": "integer", "enum": [1]},
    "network": {
      "type": "object",
      "required": ["chain_id", "rpc_url", "confirmations_required", "ens_registry"],
      "properties": {
        "chain_id": {"type": "integer", "minimum": 1},
        "rpc_url": {"type": "string", "minLength": 1},
        "confirmations_required": {"type": "integer", "minimum": 1},
        "ens_registry": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"}
      }
    },
    "operator": {
      "type": "object",
      "required": ["ens_domain", "operator_address", "governance_address", "stake_controller_address", "pause_authority_address", "contact_email"],
      "properties": {
        "ens_domain": {"type": "string", "minLength": 1},
        "operator_address": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "governance_address": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "stake_controller_address": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "pause_authority_address": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "contact_email": {"type": "string", "format": "email"}
      }
    },
    "wallet": {
      "type": "object",
      "required": ["keystore_path", "keystore_password_env"],
      "properties": {
        "keystore_path": {"type": "string", "minLength": 1},
        "keystore_password_env": {"type": "string", "pattern": "^[A-Z0-9_]+$"}
      }
    },
    "contracts": {
      "type": "object",
      "required": ["stake_manager", "fee_pool", "platform_incentives", "job_router", "job_registry", "identity_registry", "platform_registry", "system_pause"],
      "properties": {
        "stake_manager": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "fee_pool": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "platform_incentives": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "job_router": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "job_registry": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "identity_registry": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "platform_registry": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"},
        "system_pause": {"type": "string", "pattern": "^0x[0-9a-fA-F]{40}$"}
      }
    },
    "staking": {
      "type": "object",
      "required": ["minimum_stake", "currency_symbol", "auto_reinvest"],
      "properties": {
        "minimum_stake": {"type": "string", "pattern": "^[0-9]+([.][0-9]+)?$"},
        "currency_symbol": {"type": "string", "minLength": 1},
        "auto_reinvest": {"type": "boolean"}
      }
    },
    "planner": {
      "type": "object",
      "required": ["horizon", "exploration_bias", "exploitation_bias", "reward_decay", "risk_tolerance"],
      "properties": {
        "horizon": {"type": "integer", "minimum": 1},
        "exploration_bias": {"type": "number", "minimum": 0, "maximum": 1},
        "exploitation_bias": {"type": "number", "minimum": 0, "maximum": 1},
        "reward_decay": {"type": "number", "minimum": 0, "maximum": 1},
        "risk_tolerance": {"type": "number", "minimum": 0, "maximum": 1}
      }
    },
    "specialists": {
      "type": "object",
      "properties": {
        "finance": {"$ref": "#/definitions/specialist"},
        "biotech": {"$ref": "#/definitions/specialist"},
        "manufacturing": {"$ref": "#/definitions/specialist"}
      }
    },
    "knowledge_lake": {
      "type": "object",
      "required": ["storage_path", "retention_days", "max_entries"],
      "properties": {
        "storage_path": {"type": "string", "minLength": 1},
        "retention_days": {"type": "integer", "minimum": 1},
        "max_entries": {"type": "integer", "minimum": 1}
      }
    },
    "orchestrator": {
      "type": "object",
      "required": ["concurrent_jobs", "antifragility_interval_minutes"],
      "properties": {
        "concurrent_jobs": {"type": "integer", "minimum": 1},
        "antifragility_interval_minutes": {"type": "integer", "minimum": 5}
      }
    },
    "observability": {
      "type": "object",
      "required": ["dashboard_port", "metrics_port", "log_path"],
      "properties": {
        "dashboard_port": {"type": "integer", "minimum": 1, "maximum": 65535},
        "metrics_port": {"type": "integer", "minimum": 1, "maximum": 65535},
        "log_path": {"type": "string", "minLength": 1}
      }
    },
    "compliance": {
      "type": "object",
      "required": ["antifragility_drill_interval_hours", "minimum_compliance_score"],
      "properties": {
        "antifragility_drill_interval_hours": {"type": "integer", "minimum": 1},
        "minimum_compliance_score": {"type": "number", "minimum": 0, "maximum": 1}
      }
    },
    "safety": {
      "type": "object",
      "required": ["enable_auto_pause", "slashing_threshold"],
      "properties": {
        "enable_auto_pause": {"type": "boolean"},
        "slashing_threshold": {"type": "number", "minimum": 0, "maximum": 1}
      }
    }
  },
  "definitions": {
    "specialist": {
      "type": "object",
      "required": ["enabled"],
      "properties": {
        "enabled": {"type": "boolean"}
      }
    }
  }
}
