<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AGI Jobs — One-Box</title>
  <meta name="description" content="Gasless, walletless one-box interface for AGI Jobs v0" />
  <meta
    http-equiv="Content-Security-Policy"
    content="default-src 'self'; style-src 'self'; script-src 'self'; connect-src {{ connect_src }}; img-src 'self' data:; font-src 'self'; base-uri 'self'; form-action 'self';"
  />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%231052d6'/%3E%3Ctext x='50' y='62' font-family='Arial' font-size='52' fill='white' text-anchor='middle'%3EA%3C/text%3E%3C/svg%3E" />
  <!-- Build template: assets injected by scripts/build.mjs -->
  <link
    rel="stylesheet"
    href="{{ styles_css_href }}"
    integrity="{{ styles_css_integrity }}"
    crossorigin="anonymous"
  />
</head>
<body>
  <header>
    <div>
      <h1>AGI Jobs — One-Box</h1>
      <span>Gasless, walletless Web3 interface powered by the AGI-Alpha orchestrator.</span>
    </div>
    <button id="advanced-toggle" type="button">Advanced</button>
  </header>

  <main class="layout">
    <section id="feed" role="log" aria-live="polite"></section>
    <section
      id="status-board"
      class="status-board"
      aria-live="polite"
      aria-label="Job status updates"
    ></section>
    <aside id="advanced-panel" aria-live="polite" aria-label="Advanced details"></aside>
  </main>

  <section
    id="owner-console"
    class="owner-console"
    aria-live="polite"
    aria-label="Owner governance console"
  >
    <div class="owner-console__header">
      <h2>Owner Console</h2>
      <div class="owner-console__actions">
        <button id="owner-refresh" type="button">Refresh Snapshot</button>
      </div>
    </div>
    <p class="owner-console__hint">
      Review on-chain governance parameters and draft multi-sig ready updates without leaving the chat.
    </p>
    <pre id="owner-snapshot" class="owner-console__pre" aria-live="polite">Snapshot not loaded yet.</pre>
    <form id="owner-form" class="owner-console__form">
      <label for="owner-key">Governance action</label>
      <select id="owner-key" aria-describedby="owner-value-hint">
        <option value="stakeManager.setMinStake">StakeManager · setMinStake (AGIA)</option>
        <option value="stakeManager.setFeePct">StakeManager · setFeePct (%)</option>
        <option value="stakeManager.setBurnPct">StakeManager · setBurnPct (%)</option>
        <option value="stakeManager.setValidatorRewardPct">StakeManager · setValidatorRewardPct (%)</option>
        <option value="stakeManager.setTreasury">StakeManager · setTreasury (address)</option>
        <option value="jobRegistry.setJobStake">JobRegistry · setJobStake (AGIA)</option>
        <option value="jobRegistry.setMaxJobReward">JobRegistry · setMaxJobReward (AGIA)</option>
        <option value="jobRegistry.setJobDurationLimit">JobRegistry · setJobDurationLimit</option>
        <option value="jobRegistry.setJobParameters">JobRegistry · setJobParameters</option>
        <option value="feePool.setBurnPct">FeePool · setBurnPct (%)</option>
        <option value="feePool.setTreasury">FeePool · setTreasury (address)</option>
      </select>
      <label for="owner-value">Proposed value</label>
      <textarea
        id="owner-value"
        class="owner-console__textarea"
        aria-describedby="owner-value-hint"
        placeholder="Enter a number, address, or JSON payload"
      ></textarea>
      <p id="owner-value-hint" class="owner-console__hint">
        Provide raw numbers for AGIA/percentages, ENS/0x addresses, or JSON (e.g., {"maxReward": "500", "jobStake": "50"}).
      </p>
      <button id="owner-preview-btn" type="submit">Preview Multi-Sig Bundle</button>
    </form>
    <pre id="owner-preview" class="owner-console__pre" aria-live="polite">Preview will appear here.</pre>
  </section>

  <form id="composer">
    <div class="field">
      <label for="question">Describe what you want to do</label>
      <div class="input-row">
        <input
          id="question"
          type="text"
          placeholder='e.g., "Post a job for 500 images, 50 AGIALPHA reward"'
          autocomplete="off"
          aria-describedby="question-hint"
          required
        />
        <button id="send" type="submit">Send</button>
      </div>
      <p id="question-hint" class="hint">One input box. Natural language in; confirmations appear when value moves.</p>
    </div>
    <div class="field file-input">
      <label for="attachment">Attachments (optional)</label>
      <input id="attachment" type="file" multiple aria-describedby="attachment-hint" />
      <p id="attachment-hint" class="hint">Drop files anywhere or choose files to pin to IPFS for your next request.</p>
    </div>
  </form>

  <noscript>
    <p class="noscript-message">JavaScript is required for the AGI Jobs one-box interface.</p>
  </noscript>

  <script
    type="module"
    src="{{ app_js_src }}"
    integrity="{{ app_js_integrity }}"
    crossorigin="anonymous"
  ></script>
</body>
</html>
