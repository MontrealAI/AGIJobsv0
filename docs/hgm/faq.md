# HGM Operator FAQ & Troubleshooting Guide

This guide answers common questions from non-technical operators running the
Huxley–Gödel Machine (HGM) stack. Links point directly to the tools and screens
you will interact with every day.

## Quick Links
- [Guided dashboard](../../demo/Huxley-Godel-Machine-v0/web/index.html)
- [Thermostat controls](../../scripts/thermostat.py)
- [Sentinel policy](../../config/sentinel.json)
- [CI guardrails checklist](../ci-v2-branch-protection-checklist.md)
- [Emergency runbook](../RUNBOOK.md)

---

### How do I start or stop an HGM run?
Use the guided launcher included with the demo assets:
```bash
HGM_REPORT_DIR=$(pwd)/reports/hgm make demo-hgm
```
This wraps [`demo_hgm.js`](../../demo/Huxley-Godel-Machine-v0/scripts/demo_hgm.js)
and streams results into the browser UI. To stop gracefully, press `Ctrl+C`; the
workflow flushes its last metrics to the report folder.

### Where do I watch the agents grow?
Open [`web/index.html`](../../demo/Huxley-Godel-Machine-v0/web/index.html) in a
browser. The "Lineage" tab visualises the live Mermaid diagrams generated by
[`hgm_demo/visualization.py`](../../demo/Huxley-Godel-Machine-v0/hgm_demo/visualization.py).
If the tree looks frozen, refresh the page; the static bundle reads the latest
JSON snapshot from the `reports/hgm` directory.

### The dashboard says "Sentinel Pause Engaged" — what now?
1. Review the active thresholds in [`config/sentinel.json`](../../config/sentinel.json).
2. If ROI dipped temporarily, wait for the sentinel to resume automatically
   (see the `roiGracePeriod` comment in the config).
3. For urgent overrides, follow the thermostat steps in the
   [Runbook](../RUNBOOK.md#economic-levers) to lower concurrency or adjust the
   ROI floor. Avoid editing the JSON by hand unless you coordinate with an
   engineer.

### ROI looks great — can I safely add more agents?
Yes, but change one control at a time:
1. Preview the desired adjustment with
   `python scripts/thermostat.py watch --widening-step 0.08 --max-widening-alpha 1.8 --dry-run`.
2. Re-run the same command without `--dry-run` to apply the new targets. The
   controller in [`services/thermostat/controller.py`](../../services/thermostat/controller.py)
   will gradually scale to the requested level.
3. Watch the ROI and budget panels in the dashboard for ten minutes before
   making another adjustment.

### CI failed with "HGM guardrails" — do I need a developer?
Often you can resolve it yourself:
1. Re-run `ci/hgm-suite.sh` locally to see the failing stage.
2. If demo unit tests failed, open the summary in `reports/ci/hgm-demo.log`.
3. For configuration mismatches, review [`config/agialpha/hgm.json`](../../config/agialpha/hgm.json) against the
   [branch protection checklist](../ci-v2-branch-protection-checklist.md).
Escalate only if rerunning the suite still fails; provide the log bundle to the
on-call engineer.

### My budget widget shows a red "Overrun" badge. What actions should I take?
- Pause expansions temporarily by lowering concurrency through the thermostat
  CLI.
- Verify sentinel soft/hard budget caps in [`config/sentinel.json`](../../config/sentinel.json).
- If spend remains high, execute the emergency pause script documented in
  [`RUNBOOK.md`](../RUNBOOK.md#immediate-pause-procedures).

### I see "Thermostat cooldown active" in the CLI. Is that an error?
No. The thermostat enforces a cooldown after each adjustment to prevent rapid
oscillation. Wait for the countdown to reach zero before issuing another change.
The code that manages this lives in
[`services/thermostat/controller.py`](../../services/thermostat/controller.py).

### How do I export data for finance or compliance?
1. Collect the latest lineage snapshot and KPI summary:
   ```bash
   python demo/Huxley-Godel-Machine-v0/run.py --report reports/hgm/demo-report.md
   ```
2. Export ROI events with:
   ```bash
   mkdir -p reports/hgm
   python scripts/thermostat.py watch --dry-run --iterations 12 > reports/hgm/roi-export.log
   ```
3. Optionally run the culture rewards calculator in
   [`orchestrator/tools/culture_rewards.py`](../../orchestrator/tools/culture_rewards.py)
   for incentive settlement packages.

### Who maintains these guardrails?
- **Thermostat & ROI logic:** operations team owns the thresholds and schedules.
- **Sentinel policy:** risk and compliance maintain the JSON config. Changes
  require a dual-approval ticket.
- **CI guardrails:** DevOps monitors the `ci (v2) / HGM guardrails` job, but you
  can re-run it locally anytime via `ci/hgm-suite.sh`.

### When should I contact engineering?
- When CI still fails after reruns and config checks.
- When sentinel pauses persist longer than the `roiGracePeriod` and manual
  thermostat adjustments do not clear the condition.
- When the dashboard stops updating even after refreshing and the report folder
  remains unchanged for five minutes.
Provide the latest `reports/hgm` archive and any CLI logs when escalating.

---
For more background and future roadmap, read the
[HGM Operator Whitepaper](whitepaper.md).
