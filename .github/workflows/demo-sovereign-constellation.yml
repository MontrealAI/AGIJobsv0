name: demo-sovereign-constellation

on:
  push:
    branches:
      - main
      - 'release/**'
  pull_request:
    paths:
      - demo/sovereign-constellation/**
      - .github/workflows/demo-sovereign-constellation.yml
      - package.json
      - package-lock.json

env:
  CYPRESS_INSTALL_BINARY: 'https://github.com/cypress-io/cypress/releases/download/v13.17.0/cypress-linux-x64.zip'

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - name: Install dependencies
        run: npm ci --no-audit --prefer-offline --progress=false
      - name: Sovereign Constellation CI
        run: npm run demo:sovereign-constellation:ci
