{
  "title": "AA Stack Overview",
  "uid": "aa-stack",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "30s",
  "panels": [
    {
      "type": "timeseries",
      "title": "Time To Operation (p95)",
      "targets": [
        {
          "expr": "aa:tto_seconds:avg5m",
          "legendFormat": "p95"
        }
      ],
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green" },
              { "color": "orange", "value": 2 },
              { "color": "red", "value": 4 }
            ]
          }
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 }
    },
    {
      "type": "timeseries",
      "title": "Success Rate",
      "targets": [
        {
          "expr": "aa:success_rate:ratio5m",
          "legendFormat": "success"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              { "color": "red", "value": 0.95 },
              { "color": "orange", "value": 0.98 },
              { "color": "green", "value": 0.99 }
            ]
          }
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      }
    },
    {
      "type": "timeseries",
      "title": "Treasury Balance (USD)",
      "targets": [
        {
          "expr": "paymaster_treasury_balance_usd",
          "legendFormat": "balance"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 8 },
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      }
    },
    {
      "type": "timeseries",
      "title": "IPFS Pin Latency (p95)",
      "targets": [
        {
          "expr": "aa:ipfs_pin_latency_seconds:p95",
          "legendFormat": "p95"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "s"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 8 },
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      }
    }
  ],
  "links": [
    {
      "title": "Runbook: Pause Switch",
      "url": "https://docs.example.com/runbooks/pause"
    },
    {
      "title": "Runbook: Disaster Recovery",
      "url": "https://docs.example.com/runbooks/disaster-recovery"
    }
  ]
}
